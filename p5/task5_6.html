<!doctype html>

<html>
<head>
	<title>Раскрывающейся списка</title>
	<meta charset="utf-8">
	<style type="text/css">
		ul.expandable li { list-style-image: url('../images/point.gif') }
		li ul.expandable { display: block } /* выставить в none */
	</style>
	<script type="text/javascript">
		function setPlusIcon(){
			const anchors = document.querySelectorAll('a');
			anchors.forEach(anchor => {
				const nextUl = anchor.nextElementSibling;
				if (nextUl && nextUl.tagName === 'UL') {
					nextUl.style.display = 'none';
					anchor.parentElement.style.listStyleImage = 'url(img/plus.gif)';
				}

				anchor.addEventListener('click', aClick);
			});
		}

		function aClick(e){
			const parentLi = this.parentElement;
			const nextUl = this.nextElementSibling;

			if(!nextUl || nextUl.tagName !== 'UL') {
				this.click();
				return;
			}
			e.preventDefault();

			if(nextUl.style.display === 'none'){
				parentLi.style.listStyleImage = 'url(img/minus.gif)';
				nextUl.style.display = 'block';
			}
			else {
				parentLi.style.listStyleImage = 'url(img/plus.gif)';
				nextUl.style.display = 'none';
			}
		}	
		
		window.onload = setPlusIcon;
		
	</script>
</head>

<body>
	<h1>Пример раскрывающегося списка</h1>
	<ul class="expandable">
		<li>
			<a href="#">Книги</a>
			<ul class="expandable">
				<li>
					<a href="#">Отечественные</a>
					<ul class="expandable">
						<li><a href="#">Детективы</a></li>
						<li><a href="#">Научная фантастика</a></li>
						<li><a href="#">Исторические</a></li>
					</ul>
				</li>
				<li>
					<a href="#">Зарубежные</a>
					<ul class="expandable">
						<li><a href="#">Детективы</a></li>
						<li><a href="#">Научная фантастика</a></li>
						<li><a href="#">Исторические</a></li>
					</ul>
				</li>
			</ul>
		</li>
 		<li>
			<a href="#">DVD</a>
			<ul class="expandable">
				<li>
					<a href="#">Отечественные</a>
					<ul class="expandable">
						<li><a href="#">Детективы</a></li>
						<li><a href="#">Научная фантастика</a></li>
						<li><a href="#">Исторические</a></li>
					</ul>
				</li>
				<li>
					<a href="#">Зарубежные</a>
					<ul class="expandable">
						<li><a href="#">Детективы</a></li>
						<li><a href="#">Научная фантастика</a></li>
						<li><a href="#">Исторические</a></li>
					</ul>
				</li>
			</ul>
		</li>
	</ul>
</body>
</html>
